{% extends "base.html" %}

{% block title %}Listar Chamados - HelpDesk{% endblock %}

{% block content %}
<h1>üìã Lista de Chamados</h1>

{% if chamados %}
<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead class="table-dark">
            <tr>
                <th>#ID</th>
                <th>üè¢ Laborat√≥rio</th>
                <th>‚ö†Ô∏è Problema</th>
                <th>üî¥ Prioridade</th>
                <th>‚öôÔ∏è A√ß√µes</th>
            </tr>
        </thead>
        <tbody>
            <style>
                .table-responsive {
                    border-radius: 8px;
                    overflow: hidden;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                    margin-bottom: 2rem;
                }

                .table {
                    margin-bottom: 0;
                }

                .table thead {
                    background-color: #2c3e50;
                    font-weight: 600;
                    color: #fff;
                }

                .table thead th {
                    padding: 1rem;
                    border: none;
                }

                .table tbody tr {
                    transition: background-color 0.2s ease;
                    border-bottom: 1px solid #e9ecef;
                }

                .table tbody tr:hover {
                    background-color: #f8f9fa;
                }

                .badge {
                    font-size: 0.85rem;
                    padding: 0.5rem 0.75rem;
                    font-weight: 500;
                }

                .btn-sm {
                    padding: 0.4rem 0.8rem;
                    font-size: 0.875rem;
                }

                .mt-4 {
                    display: flex;
                    gap: 1rem;
                    flex-wrap: wrap;
                }

                .btn-lg {
                    padding: 0.75rem 1.5rem;
                    font-size: 1rem;
                    border-radius: 6px;
                    transition: transform 0.2s, box-shadow 0.2s;
                }

                .btn-lg:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                }

                .alert {
                    border-radius: 8px;
                    border-left: 4px solid #ffc107;
                }

                h1 {
                    color: #333;
                    margin-bottom: 1.5rem;
                    font-weight: 600;
                }
            </style>
            {% for chamado in chamados %}
            <tr>
                <td><strong>{{ forloop.counter0 }}</strong></td>
                <td>{{ chamado.lab }}</td>
                <td>{{ chamado.problema }}</td>
                <td>
                    {% if chamado.prioridade == "Alta" %}
                    <span class="badge bg-danger">{{ chamado.prioridade }}</span>
                    {% elif chamado.prioridade == "M√©dia" %}
                    <span class="badge bg-warning">{{ chamado.prioridade }}</span>
                    {% else %}
                    <span class="badge bg-info">{{ chamado.prioridade }}</span>
                    {% endif %}
                </td>
                <td>
                    <a href="/fechar/{{ forloop.counter0 }}" class="btn btn-sm btn-danger"
                        onclick="return confirm('Tem certeza?')">
                        ‚ùå Fechar
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-warning">
    <strong>‚ö†Ô∏è Nenhum chamado</strong> - N√£o h√° chamados abertos no momento.
</div>
{% endif %}

<div class="mt-4">
    <a href="/novo/Lab02/Teclado/Alta/" class="btn btn-success btn-lg">
        ‚ûï Simular Novo Chamado
    </a>
    <a href="/" class="btn btn-secondary btn-lg">
        ‚Üê Voltar
    </a>
</div>
{% endblock %}